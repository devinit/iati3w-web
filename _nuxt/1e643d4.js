(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{245:function(t,e,n){var content=n(248);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(56).default)("75ec41fb",content,!0,{sourceMap:!1})},247:function(t,e,n){"use strict";n(245)},248:function(t,e,n){var o=n(55)(!1);o.push([t.i,".region-map{height:350px!important;width:100%;background:none}",""]),t.exports=o},251:function(t,e,n){"use strict";n(2),n(4),n(5);var o=n(11),r=n(0),c=(n(47),n(166),n(13),n(3),n(9),n(1),n(48)),l={components:{},props:["activities","region","regionName","geojson","type","totalActivities"],computed:{options:function(){return{onEachFeature:this.onEachFeatureFunction}},onEachFeatureFunction:function(){var t=this;return function(e,n){n.on("mouseover",(function(t){t.target.setStyle({fillOpacity:1})})),n.on("mouseout",(function(e){e.target.setStyle({fillOpacity:t.fillOpacity})})),n.on("click",(function(){t.clickRegion()}));var o=t.numActivities;n.bindTooltip("".concat(t.regionName,": ").concat(o," activities"),{permanent:!1,sticky:!0})}},numActivities:function(){return this.regionName in this.activities?this.activities[this.regionName]:0},fillOpacity:function(){return this.numActivities/this.totalActivities*10||0},optionsStyle:function(){return{fillColor:"#585fd2",weight:1,opacity:.5,color:"#bbbbbb",fillOpacity:this.fillOpacity}}},methods:{clickRegion:function(){this.$router.push({name:"locations-type-stub",params:{type:this.type,stub:this.geojson.stub}})}}},m=n(54),f=Object(m.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("l-geo-json",{ref:"geoJson",attrs:{geojson:t.geojson,options:t.options,"options-style":t.optionsStyle}})}),[],!1,null,null,null).exports;n(168);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var v={components:{RegionMapFeature:f},props:["locations","locationsList"],data:function(){return{busy:!0,zoom:5,center:[5,45],mapControls:{zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,dragging:!1,keyboard:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,touchZoom:!1}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({locationsNamesStubs:function(){return Object.entries(this.locations.admin1).reduce((function(summary,t){return summary[t[1].info.name]={stub:t[0],data:t[1]},summary}),{})},locationsStubsNames:function(){return Object.entries(this.locations.admin1).reduce((function(summary,t){return summary[t[0]]=t[1].info.name,summary}),{})},regions:function(){var t=this;return 0===Object.keys(this.geoJSONData).length?[]:this.geoJSONData.features.map((function(e){return{region:e.properties.admin1Name,regionName:e.properties.admin1Name,features:[e],stub:t.locationsNamesStubs[e.properties.admin1Name]?t.locationsNamesStubs[e.properties.admin1Name].stub:"",data:t.locationsNamesStubs[e.properties.admin1Name]?t.locationsNamesStubs[e.properties.admin1Name].data:{}}}))},activities:function(){return this.locationsList?this.activitiesLocationsList:this.activitiesLocations},totalActivities:function(){return this.locationsList?this.totalActivitiesLocationsList:this.totalActivitiesLocations},totalActivitiesLocationsList:function(){return Object.entries(this.locationsList.admin1).reduce((function(summary,t){return summary+t[1]}),0)},totalActivitiesLocations:function(){var t=this;return Object.entries(this.locations.admin1).reduce((function(summary,e){return summary+e[1].activities.filter((function(e){return t.checkSource(e)})).length}),0)},activitiesLocationsList:function(){var t=this;return Object.entries(this.locationsList.admin1).reduce((function(summary,e){return summary[t.locationsStubsNames[e[0]]]=e[1],summary}),{})},activitiesLocations:function(){var t=this;return Object.entries(this.locations.admin1).reduce((function(summary,e){return summary[e[1].info.name]=e[1].activities.filter((function(e){return t.checkSource(e)})).length,summary}),{})}},Object(c.b)(["geoJSONData","source"])),methods:{checkSource:function(t){return"all"==this.source||("3w"==this.source&&8==t.length||"iati"==this.source&&8!=t.length)}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("loadMapData");case 2:t.busy=!1;case 3:case"end":return e.stop()}}),e)})))()}},d=(n(247),Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.busy?[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("b-spinner",{attrs:{variant:"secondary",label:"Loading..."}})],1)]:[n("l-map",{staticClass:"region-map",attrs:{zoom:t.zoom,center:t.center,options:t.mapControls}},t._l(t.regions,(function(e){return n("RegionMapFeature",{key:e.region,attrs:{geojson:e,activities:t.activities,"total-activities":t.totalActivities,region:e.region,"region-name":e.regionName,type:"admin1"}})})),1)]],2)}),[],!1,null,null,null));e.a=d.exports},420:function(t,e,n){"use strict";n.r(e);n(3),n(2),n(1),n(4),n(5);var o=n(11),r=n(0),c=(n(47),n(17),n(13),n(395)),l=n.n(c),m=n(48),f=n(253),h=n(252),v=n(396),d=n(251);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var O={data:function(){return{busy:!0,sector:{}}},components:{Org:f.a,Location:h.a,ActivitiesList:v.a,RegionMap:d.a},methods:{flatten:function(t){return this.$options.filters.flatten(t)},handleScroll:function(){var t=this.$route.hash.split("#")[1];this.$route.hash&&setTimeout((function(){var e=document.getElementById(t);l.a.scrollTo(e,500)}),300)}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({sector_type:function(){return this.$route.params.type},sector_name:function(){return this.sectors[this.sector_type][this.stub].name},stub:function(){return this.$route.params.stub}},Object(m.b)(["sectors","orgs","activities","locations","source"])),mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("loadSectors");case 2:return e.next=4,t.$store.dispatch("loadOrgs");case 4:return e.next=6,t.$store.dispatch("loadActivities");case 6:return e.next=8,t.$store.dispatch("loadLocations");case 8:t.sector=t.sectors[t.$route.params.type][t.$route.params.stub],t.busy=!1,t.handleScroll();case 11:case"end":return e.stop()}}),e)})))()}},_=n(54),component=Object(_.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.busy?n("main",[n("div",{staticClass:"d-flex justify-content-center mb-3"},[n("b-spinner",{attrs:{variant:"secondary",label:"Loading..."}})],1)]):n("main",[n("section",{attrs:{id:"content"}},[n("nav",{staticClass:"secondary"},[n("nuxt-link",{attrs:{to:{name:"sectors-type-stub",params:{type:t.sector_type,stub:t.stub},hash:"#orgs"}}},[t._v("Organisations")]),t._v(" "),n("nuxt-link",{attrs:{to:{name:"sectors-type-stub",params:{type:t.sector_type,stub:t.stub},hash:"#locations"}}},[t._v("Locations")]),t._v(" "),n("nuxt-link",{attrs:{to:{name:"sectors-type-stub",params:{type:t.sector_type,stub:t.stub},hash:"#activities"}}},[t._v("Activities")])],1),t._v(" "),n("h2",[t._v(t._s(t._f("sector")(t.sector_type))+": "+t._s(t.sector_name))]),t._v(" "),n("section",{attrs:{id:"orgs"}},[n("h3",[t._v("Organisations working in "+t._s(t.sector_name))]),t._v(" "),t._l(["local","regional","international","unknown"],(function(e){return Object.keys(t.sector.orgs[t.source][e]).length>0?n("section",{key:e,attrs:{id:"orgs."+e}},[n("h4",[t._v(t._s(t._f("capitalize")(t._f("scope")(e)))+"s")]),t._v(" "),n("b-card-group",{attrs:{columns:""}},t._l(Object.keys(t.sector.orgs[t.source][e]).sort(),(function(o){return n("Org",{key:o,attrs:{org:t.orgs[o],activity_count:t.sector.orgs[t.source][e][o]}})})),1)],1):t._e()})),t._v(" "),n("hr")],2),t._v(" "),n("section",{attrs:{id:"locations"}},[n("h3",[t._v("Where "+t._s(t.sector_name)+" is active")]),t._v(" "),n("b-row",[n("b-col",{attrs:{lg:"4"}},[n("client-only",[n("RegionMap",{staticClass:"mb-4",attrs:{locations:t.locations,"locations-list":t.sector.locations[t.source]}})],1)],1),t._v(" "),n("b-col",{attrs:{lg:"8"}},[n("b-card-group",{attrs:{columns:""}},t._l(Object.keys(t.sector.locations[t.source].admin1).sort(),(function(e){return n("b-card",{key:e},[n("h4",[t._v(t._s(t.locations.admin1[e].info.name))]),t._v(" "),n("div",{staticClass:"inline-list"},t._l(Object.keys(t.sector.locations[t.source].admin2).sort(),(function(o){return t.locations.admin2[o].info.admin1==e?n("Location",{key:o,attrs:{name:t.locations.admin2[o].info.name,stub:o,type:"admin2",activity_count:t.sector.locations[t.source].admin2[o]}}):t._e()})),1)])})),1)],1)],1),t._v(" "),0==Object.keys(t.sector.locations[t.source].admin1).length?n("p",{staticClass:"warning"},[t._v("No location information available for "+t._s(t.sector_name)+".")]):t._e(),t._v(" "),n("hr")],1),t._v(" "),n("section",{attrs:{id:"activities"}},[n("h3",[t._v("Activities related to "+t._s(t.sector_name)+" ("+t._s(t._f("length")(t.sector.activities))+")")]),t._v(" "),n("ActivitiesList",{attrs:{activities:t.activities,activitiesList:t.sector.activities}})],1)])])])}),[],!1,null,null,null);e.default=component.exports}}]);