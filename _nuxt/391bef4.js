(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{245:function(t,n,e){var content=e(248);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(56).default)("75ec41fb",content,!0,{sourceMap:!1})},246:function(t,n,e){"use strict";var o={data:function(){return{}},props:{name:String,stub:String,type:String}},r=e(54),component=Object(r.a)(o,(function(){var t=this,n=t.$createElement;return(t._self._c||n)("nuxt-link",{attrs:{to:{name:"locations-type-stub",params:{stub:t.stub,type:t.type}}}},[t._v("\n  "+t._s(t.name)+" "+t._s(t._f("capitalize")(t._f("location")(t.type)))+"\n")])}),[],!1,null,null,null);n.a=component.exports},247:function(t,n,e){"use strict";e(245)},248:function(t,n,e){var o=e(55)(!1);o.push([t.i,".region-map{height:350px!important;width:100%;background:none}",""]),t.exports=o},251:function(t,n,e){"use strict";e(2),e(4),e(5);var o=e(11),r=e(0),c=(e(47),e(166),e(13),e(3),e(9),e(1),e(48)),l={components:{},props:["activities","region","regionName","geojson","type","totalActivities"],computed:{options:function(){return{onEachFeature:this.onEachFeatureFunction}},onEachFeatureFunction:function(){var t=this;return function(n,e){e.on("mouseover",(function(t){t.target.setStyle({fillOpacity:1})})),e.on("mouseout",(function(n){n.target.setStyle({fillOpacity:t.fillOpacity})})),e.on("click",(function(){t.clickRegion()}));var o=t.numActivities;e.bindTooltip("".concat(t.regionName,": ").concat(o," activities"),{permanent:!1,sticky:!0})}},numActivities:function(){return this.regionName in this.activities?this.activities[this.regionName]:0},fillOpacity:function(){return this.numActivities/this.totalActivities*10||0},optionsStyle:function(){return{fillColor:"#585fd2",weight:1,opacity:.5,color:"#bbbbbb",fillOpacity:this.fillOpacity}}},methods:{clickRegion:function(){this.$router.push({name:"locations-type-stub",params:{type:this.type,stub:this.geojson.stub}})}}},f=e(54),m=Object(f.a)(l,(function(){var t=this,n=t.$createElement;return(t._self._c||n)("l-geo-json",{ref:"geoJson",attrs:{geojson:t.geojson,options:t.options,"options-style":t.optionsStyle}})}),[],!1,null,null,null).exports;e(168);function d(object,t){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),n.push.apply(n,e)}return n}var v={components:{RegionMapFeature:m},props:["locations","locationsList"],data:function(){return{busy:!0,zoom:5,center:[5,45],mapControls:{zoomControl:!1,attributionControl:!1,scrollWheelZoom:!1,dragging:!1,keyboard:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,touchZoom:!1}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(n){Object(r.a)(t,n,source[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(source,n))}))}return t}({locationsNamesStubs:function(){return Object.entries(this.locations.admin1).reduce((function(summary,t){return summary[t[1].info.name]={stub:t[0],data:t[1]},summary}),{})},locationsStubsNames:function(){return Object.entries(this.locations.admin1).reduce((function(summary,t){return summary[t[0]]=t[1].info.name,summary}),{})},regions:function(){var t=this;return 0===Object.keys(this.geoJSONData).length?[]:this.geoJSONData.features.map((function(n){return{region:n.properties.admin1Name,regionName:n.properties.admin1Name,features:[n],stub:t.locationsNamesStubs[n.properties.admin1Name]?t.locationsNamesStubs[n.properties.admin1Name].stub:"",data:t.locationsNamesStubs[n.properties.admin1Name]?t.locationsNamesStubs[n.properties.admin1Name].data:{}}}))},activities:function(){return this.locationsList?this.activitiesLocationsList:this.activitiesLocations},totalActivities:function(){return this.locationsList?this.totalActivitiesLocationsList:this.totalActivitiesLocations},totalActivitiesLocationsList:function(){return Object.entries(this.locationsList.admin1).reduce((function(summary,t){return summary+t[1]}),0)},totalActivitiesLocations:function(){var t=this;return Object.entries(this.locations.admin1).reduce((function(summary,n){return summary+n[1].activities.filter((function(n){return t.checkSource(n)})).length}),0)},activitiesLocationsList:function(){var t=this;return Object.entries(this.locationsList.admin1).reduce((function(summary,n){return summary[t.locationsStubsNames[n[0]]]=n[1],summary}),{})},activitiesLocations:function(){var t=this;return Object.entries(this.locations.admin1).reduce((function(summary,n){return summary[n[1].info.name]=n[1].activities.filter((function(n){return t.checkSource(n)})).length,summary}),{})}},Object(c.b)(["geoJSONData","source"])),methods:{checkSource:function(t){return"all"==this.source||("3w"==this.source&&8==t.length||"iati"==this.source&&8!=t.length)}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("loadMapData");case 2:t.busy=!1;case 3:case"end":return n.stop()}}),n)})))()}},h=(e(247),Object(f.a)(v,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[t.busy?[e("div",{staticClass:"d-flex justify-content-center mb-3"},[e("b-spinner",{attrs:{variant:"secondary",label:"Loading..."}})],1)]:[e("l-map",{staticClass:"region-map",attrs:{zoom:t.zoom,center:t.center,options:t.mapControls}},t._l(t.regions,(function(n){return e("RegionMapFeature",{key:n.region,attrs:{geojson:n,activities:t.activities,"total-activities":t.totalActivities,region:n.region,"region-name":n.regionName,type:"admin1"}})})),1)]],2)}),[],!1,null,null,null));n.a=h.exports},252:function(t,n,e){"use strict";e(167);var o=e(246),r={data:function(){return{}},props:{stub:String,name:String,type:String,org_count:{type:Number,default:-1},activity_count:{type:Number,default:-1}},components:{LocationLink:o.a}},c=e(54),component=Object(c.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"item"},[e("LocationLink",{attrs:{stub:t.stub,name:t.name,type:t.type}}),t._v(" "),t.org_count>-1?e("span",{staticClass:"info"},[t._v("\n    "+t._s(t._f("plural")(t.org_count,"organisation","organisations"))+"\n  ")]):t._e(),t._v(" "),t.activity_count>-1?e("span",{staticClass:"info"},[t._v("\n    "+t._s(t._f("plural")(t.activity_count,"activity","activities"))+"\n  ")]):t._e()],1)}),[],!1,null,null,null);n.a=component.exports},414:function(t,n,e){"use strict";e.r(n);var o=e(11),r=(e(47),e(48)),c=e(252),l=e(246),f=e(251),m={data:function(){return{busy:!0}},components:{Location:c.a,LocationLink:l.a,RegionMap:f.a},methods:{flatten:function(t){return this.$options.filters.flatten(t)}},computed:Object(r.b)(["locations"]),mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$store.dispatch("loadLocations");case 2:t.busy=!1;case 3:case"end":return n.stop()}}),n)})))()}},d=e(54),component=Object(d.a)(m,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[t.busy?e("main",[e("div",{staticClass:"d-flex justify-content-center mb-3"},[e("b-spinner",{attrs:{variant:"secondary",label:"Loading..."}})],1)]):e("main",[e("h1",[t._v("Locations of aid projects in Somalia")]),t._v(" "),t.locations?e("section",{attrs:{id:"content"}},[e("b-row",[e("b-col",{attrs:{md:"6"}},[e("client-only",[e("RegionMap",{staticClass:"mb-4",attrs:{locations:t.locations}})],1)],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-alert",{attrs:{variant:"info",show:""}},[t._v("\n            These names reflect Somalia's official administrative\n            divisions. The regions of Awdal, Sanaag, Sool, Toghdeer, and\n            Woqooyi Galbeed make up "),e("b",[t._v("Somaliland")]),t._v(", a\n            separately-governed entity without international\n            recognition. Somaliland divides Somalia's region of Woqooyi\n            Galbeed into its own regions of "),e("i",[t._v("Maroodi Jeeh")]),t._v(" and\n            "),e("i",[t._v("Sahil")]),t._v(".\n          ")])],1)],1),t._v(" "),t._l(Object.keys(t.locations.admin1).sort(),(function(n){return e("section",{key:n},[e("h3",[e("LocationLink",{attrs:{stub:n,name:t.locations.admin1[n].info.name,type:"admin1"}}),t._v("\n          ("+t._s(t._f("plural")(t._f("length")(t._f("flatten")(t.locations.admin1[n].orgs)),"organisation","organisations"))+")\n        ")],1),t._v(" "),e("div",{staticClass:"inline-list"},t._l(Object.keys(t.locations.admin2).sort(),(function(o){return t.locations.admin2[o].info.admin1==n?e("Location",{key:o,attrs:{name:t.locations.admin2[o].info.name,stub:o,type:"admin2",org_count:t.flatten(t.locations.admin2[o].orgs).length,activity_count:t.flatten(t.locations.admin2[o].activities).length}}):t._e()})),1)])}))],2):t._e()])])}),[],!1,null,null,null);n.default=component.exports}}]);